{# influencer/templates/influencer/public_profile.html #}
{% extends "base2.html" %}

{% block title %}{{ influencer.display_name }} さんのプロフィール{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-100 p-4 flex flex-col items-center">
  <div class="w-full max-w-md bg-white rounded-2xl shadow-md overflow-hidden">
    {# ━━━ ヘッダーエリア ━━━ #}
    <div class="px-6 py-6 flex flex-col items-center">
      {# プロフィール画像 #}
      {% if influencer.profile_image %}
        <img
          src="{{ influencer.profile_image.url }}"
          alt="プロフィール画像"
          class="w-24 h-24 rounded-full object-cover border-2 border-gray-300 mb-3"
        >
      {% else %}
        <div class="w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center mb-3">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none"
               viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M5.121 17.804A10.97 10.97 0 0112 15c2.53 0 4.87.95 6.879 2.804M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
        </div>
      {% endif %}

      {# 表示名（ニックネーム） #}
      <h1 class="text-xl font-semibold text-gray-800">{{ influencer.display_name }}</h1>

      {# プロフィール文（自己紹介 / ファンへのひとこと） #}
      {% if influencer.bio %}
        <p class="mt-1 text-sm text-gray-600 text-center">{{ influencer.bio }}</p>
      {% else %}
        <p class="mt-1 text-sm text-gray-400 text-center">自己紹介は未登録です。</p>
      {% endif %}

      {# SNSリンク（X / Twitter, Instagram などのアイコン） #}
      <div class="mt-3 flex space-x-4">
        {# Twitter（X）#}
        {% if influencer.twitter_url %}
          <a href="{{ influencer.twitter_url }}" target="_blank" rel="noopener" class="text-gray-700 hover:text-gray-900">
            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 50 50">
            <path d="M 5.9199219 6 L 20.582031 27.375 L 6.2304688 44 L 9.4101562 44 L 21.986328 29.421875 L 31.986328 44 L 44 44 L 28.681641 21.669922 L 42.199219 6 L 39.029297 6 L 27.275391 19.617188 L 17.933594 6 L 5.9199219 6 z M 9.7167969 8 L 16.880859 8 L 40.203125 42 L 33.039062 42 L 9.7167969 8 z"></path>
            </svg>
          </a>
        {% endif %}

        {# Instagram #}
        {% if influencer.instagram_url %}
          <a href="{{ influencer.instagram_url }}" target="_blank" rel="noopener" class="text-gray-700 hover:text-gray-900">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="currentColor"
                 viewBox="0 0 24 24">
              <path d="M7.75 2h8.5C19.097 2 22 4.903 22 8.25v7.5C22 19.097 19.097 22 16.25 22h-8.5C4.903 22 2 19.097 2 16.25v-7.5C2 4.903 4.903 2 7.75 2zm0 1.5C5.955 3.5 4.5 4.955 4.5 7.75v8.5c0 2.795 1.455 4.25 3.25 4.25h8.5c2.795 0 4.25-1.455 4.25-4.25v-8.5c0-2.795-1.455-4.25-4.25-4.25h-8.5zM12 7a5 5 0 11-.001 10.001A5 5 0 0112 7zm0 1.5a3.5 3.5 0 100 7 3.5 3.5 0 000-7zm5.5-.879a1.121 1.121 0 11-2.243 0 1.121 1.121 0 012.243 0z"/>
            </svg>
          </a>
        {% endif %}

        {% if influencer.tiktok_url %}
          <a href="{{ influencer.tiktok_url }}" target="_blank" rel="noopener" class="text-gray-700 hover:text-gray-900">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 50 50" fill="currentColor">
              <path d="
                                        M 9 4
                                        C 6.2495759 4 4 6.2495759 4 9
                                        L 4 41
                                        C 4 43.750424 6.2495759 46 9 46
                                        L 41 46
                                        C 43.750424 46 46 43.750424 46 41
                                        L 46 9
                                        C 46 6.2495759 43.750424 4 41 4
                                        L 9 4
                                        z
                                        M 9 6
                                        L 41 6
                                        C 42.671576 6 44 7.3284241 44 9
                                        L 44 41
                                        C 44 42.671576 42.671576 44 41 44
                                        L 9 44
                                        C 7.3284241 44 6 42.671576 6 41
                                        L 6 9
                                        C 6 7.3284241 7.3284241 6 9 6
                                        z
                                        M 26.042969 10
                                        A 1.0001 1.0001 0 0 0 25.042969 10.998047
                                        C 25.042969 10.998047 25.031984 15.873262 25.021484 20.759766
                                        C 25.016184 23.203017 25.009799 25.64879 25.005859 27.490234
                                        C 25.001922 29.331679 25 30.496833 25 30.59375
                                        C 25 32.409009 23.351421 33.892578 21.472656 33.892578
                                        C 19.608867 33.892578 18.121094 32.402853 18.121094 30.539062
                                        C 18.121094 28.675273 19.608867 27.1875 21.472656 27.1875
                                        C 21.535796 27.1875 21.663054 27.208245 21.880859 27.234375
                                        A 1.0001 1.0001 0 0 0 23 26.240234
                                        L 23 22.039062
                                        A 1.0001 1.0001 0 0 0 22.0625 21.041016
                                        C 21.906673 21.031216 21.710581 21.011719 21.472656 21.011719
                                        C 16.223131 21.011719 11.945313 25.289537 11.945312 30.539062
                                        C 11.945312 35.788589 16.223131 40.066406 21.472656 40.066406
                                        C 26.72204 40.066409 31 35.788588 31 30.539062
                                        L 31 21.490234
                                        C 32.454611 22.653646 34.267517 23.390625 36.269531 23.390625
                                        C 36.542588 23.390625 36.802305 23.374442 37.050781 23.351562
                                        A 1.0001 1.0001 0 0 0 37.958984 22.355469
                                        L 37.958984 17.685547
                                        A 1.0001 1.0001 0 0 0 37.03125 16.6875
                                        C 33.886609 16.461891 31.379838 14.012216 31.052734 10.896484
                                        A 1.0001 1.0001 0 0 0 30.058594 10
                                        L 26.042969 10
                                        z
                                        M 27.041016 12
                                        L 29.322266 12
                                        C 30.049047 15.2987 32.626734 17.814404 35.958984 18.445312
                                        L 35.958984 21.310547
                                        C 33.820114 21.201935 31.941489 20.134948 30.835938 18.453125
                                        A 1.0001 1.0001 0 0 0 29 19.003906
                                        L 29 30.539062
                                        C 29 34.707538 25.641273 38.066406 21.472656 38.066406
                                        C 17.304181 38.066406 13.945312 34.707538 13.945312 30.539062
                                        C 13.945312 26.538539 17.066083 23.363182 21 23.107422
                                        L 21 25.283203
                                        C 18.286416 25.535721 16.121094 27.762246 16.121094 30.539062
                                        C 16.121094 33.483274 18.528445 35.892578 21.472656 35.892578
                                        C 24.401892 35.892578 27 33.586491 27 30.59375
                                        C 27 30.64267 27.001859 29.335571 27.005859 27.494141
                                        C 27.009759 25.65271 27.016224 23.20692 27.021484 20.763672
                                        C 27.030884 16.376775 27.039186 12.849206 27.041016 12
                                        z
                                    "/>
            </svg>
          </a>
        {% endif %}


      {% load url_icon %}

        {% if influencer.free_url1 %}
          <div class="flex items-center mt-2 space-x-2">
            {% detect_icon influencer.free_url1 as icon_name %}
            {% include 'influencer/snippets/icons.html' with icon_name=icon_name %}
            <a href="{{ influencer.free_url1 }}" target="_blank" class="text-sm text-blue-700 underline break-all">
              {{ influencer.free_url1 }}
            </a>
          </div>
        {% endif %}

        {% if influencer.free_url2 %}
          <div class="flex items-center mt-2 space-x-2">
            {% detect_icon influencer.free_url2 as icon_name %}
            {% include 'influencer/snippets/icons.html' with icon_name=icon_name %}
            <a href="{{ influencer.free_url2 }}" target="_blank" class="text-sm text-blue-700 underline break-all">
              {{ influencer.free_url2 }}
            </a>
          </div>
        {% endif %}
      </div>
    </div>

    {# ━━━ 欲しいものリスト部分 (IOSのスクショ例) ━━━ #}
    <div class="px-4 pb-6">
      <h2 class="text-lg font-semibold text-gray-800 mb-3">欲しいものリスト</h2>
      {% if wish_list %}
        <ul class="space-y-4">
          {% for wish in wish_list %}
            <li class="bg-gray-50 border border-gray-200 rounded-lg p-4 flex items-start">
              {# 画像があればサムネイル表示 #}
              {% if wish.image_url %}
                <img src="{{ wish.image_url }}" alt="{{ wish.product_name }}"
                     class="w-16 h-16 object-cover rounded-md mr-4" />
              {% else %}
                <div class="w-16 h-16 bg-gray-200 rounded-md mr-4 flex items-center justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400" fill="none"
                       viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M3 3h18v18H3V3z" />
                  </svg>
                </div>
              {% endif %}
              <div class="flex-1">
                <p class="font-medium text-gray-800">{{ wish.product_name }}</p>
                {% if wish.desired_price %}
                  <p class="text-sm text-gray-600 mt-1">¥{{ wish.desired_price }}〜</p>
                {% endif %}
              </div>
              <button class="ml-4 flex items-center bg-pink-500 hover:bg-pink-600 text-white px-3 py-1 rounded-full text-sm">
                <!-- ギフトアイコン例 -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none"
                     viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M20 12v8a2 2 0 01-2 2H6a2 2 0 01-2-2v-8m16 0L12 3 4 12m16 0H4" />
                </svg>
                このギフトを贈る
              </button>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="text-gray-500">公開中のアイテムはありません。</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}

